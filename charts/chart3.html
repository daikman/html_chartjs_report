<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<link rel="stylesheet" type="text/css" href="../style/styles.css">
<div>

  <canvas id="chart3"></canvas>
  <input type="range" id="year" name="volume"
         min="1990" max="2017" step = 9 value = 1990>
         <div style = "display: inline-block;">
<p>Year: <span id="year_display"></span></p>
         </div>

  <script type="text/javascript">

    var years = [1990, 1999, 2008, 2017];

    var countries = ["Algeria", "Papua NG", "Oman", "B and H",
    "Cuba", "SVG", "Finland", "Angola", "Latvia",
    "Hungary", "Guyana", "Saint Lucia", "Jersey", "South Sudan", "Hong Kong"];

    var mobile_subs = [
    [0, 0, 0, 0, 5, 0, 2, 0, 0, 0, 0, 0, 0, 0, 2], // 1990
    [0, 0, 1, 0, 63, 0, 65, 16, 0, 11, 5, 0, 1, 1, 65], // 1999
    [78, 31, 84, 3, 128, 60, 167, 122, 0, 106, 117, 13, 103, 119, 167], // 2008
    [121, 45, 98, 40, 132, 83, 249, 124, 126, 150, 0, 99, 106, 12, 249] //2017
    ]

    var ctx = document.getElementById('chart3').getContext('2d');
    var chart3 = new Chart(ctx, {
    // The type of chart we want to create
    type: 'bar',

    // The data for our dataset
    data: {
        labels: countries,
        datasets: [{
            label: 'Mobile phone subscriptions',
            data: mobile_subs[0],
            backgroundColor: 'rgb(255, 0, 0, 0.3)',
            hoverBackgroundColor: 'rgb(255, 0, 0, 0.6)'
        }]
    },

    // Configuration options go here
    options: {
      legend: {
        display: false
      },
      tooltips: {
        position: 'average',
        caretSize: 0,
        caretPadding: 20,
        displayColors: false
      },
      scales: {
          yAxes: [{
              display: true,
              ticks: {
                  beginAtZero: true   // minimum value will be 0.
              }
          }]
      }}
    });
    var slider = document.getElementById("year");
    var output = document.getElementById("year_display");
    var index = 0;
    output.innerHTML = slider.value;

    slider.oninput = function() {
      output.innerHTML = this.value;
      index = years.indexOf(parseInt(this.value));

      chart3.data.datasets[0].data = mobile_subs[index];
      chart3.update();
    }

  </script>
</div>
